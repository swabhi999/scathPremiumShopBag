<%- include('./partials/header') %>
    <div class="w-full h-screen flex items-start px-20 py-20 gap-10">
        <div class="w-[30%] rounded-md overflow-hidden">
            <% if(user.cart && user.cart.length > 0) { %>
                <% user.cart.forEach(function(product) { %>
                    <div class="w-full h-80 mb-6 flex flex-col items-center justify-center rounded-lg" style="background:<%= product.bgColor %>;color:<%= product.textColor %>">
                        <img class="h-[12rem] mb-2" src="data:image/jpeg;base64,<%= product.image ? product.image.toString('base64') : '' %>" alt="Product Image">
                        <h3 class="text-xl mb-1" style="color:<%= product.textColor %>"><%= product.name %></h3>
                        <h4 class="text-lg" style="color:<%= product.textColor %>">₹ <%= product.price %></h4>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="w-full h-80 flex items-center justify-center bg-[<%=user.cart[0].panalcolor %>] rounded-lg">
                    <span class="text-gray-500">Your cart is empty.</span>
                </div>
            <% } %>
        </div>
        <div class="w-[70%]">
            <h3 class="text-xl">Price Breakdown</h3>
            <div class="px-10 mt-5 flex flex-col gap-8">
                <% if(user.cart && user.cart.length > 0) { %>
                    <% user.cart.forEach(function(product, idx) { %>
                        <% if (product && product.price) { %>
                        <div class="rounded-lg shadow p-5 w-full max-w-lg mx-auto mb-8 bg-white">
                            <h3 class="text-lg font-semibold mb-1 text-gray-800"><%= product.name %></h3>
                            <div class="text-sm mb-3 text-gray-500">Price Breakdown</div>
                            <div class="flex justify-between mb-1 text-sm">
                                <span>Total MRP</span>
                                <span>₹ <%= product.price %></span>
                            </div>
                            <div class="flex justify-between mb-1 text-sm">
                                <span>Discount on MRP</span>
                                <span>₹ <%= product.discount ? product.discount : 0 %></span>
                            </div>
                            <div class="flex justify-between mb-1 text-sm">
                                <span>Platform Fee</span>
                                <span>₹ 20</span>
                            </div>
                            <div class="flex justify-between mb-1 text-sm">
                                <span>Shipping Fee</span>
                                <span>FREE</span>
                            </div>
                            <div class="w-full h-[1px] bg-gray-300 my-2"></div>
                            <div class="flex justify-between font-bold text-base">
                                <span>Total Amount</span>
                                <span class="text-green-600">₹ <%= (product.price - (product.discount ? product.discount : 0)) + 20 %></span>
                            </div>
                        </div>
                        <% } %>
                    <% }) %>
                <% } %>
                <div class="flex mt-5">
                    <h3 class="w-1/3 text-xl">Total Amount</h3>
                    <h3 class="font-semibold text-xl text-green-600">₹ 1940</h3>
                </div>
                <form action=""></form>
            </div>
        </div>
    <%- include('./partials/footer') %>